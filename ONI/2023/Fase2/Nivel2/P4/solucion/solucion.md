Sea $A$ el arreglo en cuestión. La primera idea es iterar sobre todas las tripletas $(A[i], A[j], A[k])$ contando las que suman 5000. Para contar las tripletas distintas, debemos iterar desde $j = i + 1$ y desde $k = j + 1$. Estas solución toma tiempo asintótico $O(N^3)$ por lo que no alcanza para resolver la segunda subtarea.

Supongamos que los elementos estén ordenados y fijamos el primer elemento de la tripleta en el índice $i$. Consideremos los dos extremos $i+1$ y $n-1$ y la suma $S = A[i] + A[i+1] + A[n-1]$. Vemos que ya que están ordenados, $A[i] + A[i+1] + A[r] <= S$ para todo $r$. Si $S < 5000$ entonces $A[i] + A[i+1] + A[r] < 5000$ por lo que podemos descartar todas estas tripletas. De manera similar, si $S > 5000$, $A[i] + A[l] + A[n-1] > 5000$ por lo que podemos descartas estas tripletas. Esto nos lleva a una solución en la que habiendo fijado el primer elemento de la tripleta, vamos avanzando los dos extremos $l$ y $r$ hacia el medio dependiendo si la suma es mayor o menor a 5000. Si la suma en algún momento es 5000, incrementamos un contador y avanzamos ambos extremos ya que todos los valores son distintos. Esta solución corre en tiempo $O(N^2)$ y resuelve la segunda subtarea.

Para valores más grandes de $N$ necesitamos una observación ingeniosa que permita mejorar la complejidad asintótica del problema. Para empezar, si $N > 4997$ siempre existirá al menos un número mayor a 4997, ya que todos los números son enteros positivos distintos. Este número no puede existir en ninguna tripleta, ya que la tripleta con mayor valor posible es $(1, 2, 4997)$. Por lo tanto, podemos ignorar todos los números mayores a 4997 en nuestra solución. Con esto en mente podemos modificar la solución de la subtarea 2 descartando los valores mayores a 4997 de la entrada y corriendo la solución en los números restantes. Esta solución lleva tiempo $O(N) + O(K)$ donde $O(K)$ es el límite superior de tiempo posible cuando $N \leq 4997$.
