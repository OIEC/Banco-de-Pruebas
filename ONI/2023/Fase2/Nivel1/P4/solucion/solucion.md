Para la primera subtarea podemos aprovechar la estructura del número para obtener la suma inicial de los dígitos. Notamos que el dígito en la posición $i$ es $i\mod10$, y así iteramos desde $i = 1$ hasta $N$ acumulando $i\mod10$ y esto nos dará la suma inicial del número. Con esta suma inicial, ahora necesitamos repetidamente encontrar la suma de sus dígitos hasta que nos quede un único dígito. 

Para encontrar la suma de todos los dígitos de un número $k$, podemos primero encontrar el dígito de las unidades de $k$ utilizando $k\mod10$, luego podemos dividir para 10 y así eliminamos este último dígito. Repetimos este proceso acumulando el dígito de las unidades hasta que $k$ sea 0.

Con esto en mente podemos aplicar este proceso repetidamente a la suma inicial, hasta que el resultado solo tenga un dígito. Se puede verificar esto si en la división para 10 nos deja 0 cpmo cociente.

Si intentamos la misma estrategia para la segunda subtarea obtendremos que nuestra solución excede el límite de tiempo establecido. Esto ocurre ya que la solución anterior corre en tiempo por lo menos lineal en la cantidad de dígitos $N$, ya que al obtener la suma inicial iteramos sobre los $N$ dígitos. Ya que los límites en las subtareas 2 y 3 del problema incluyen potencias de 2 muy elevadas, una solución lineal no termina siendo suficiente. Además, cualquier valor de $N$ que exceda $2^{32}$ excederá los límites de int, así que debemos usar el tipo unsigned long long, y esto permitirá almacenar el valor de $N$ para todas las subtareas.

Ya que la parte que más contribuye al tiempo es ese ciclo inicial en el que sumamos todos los $N$ dígitos, intentaremos saltarnos esta parte haciendo uso inteligente de la estructura del número. Ya que cada 10 dígitos el patrón se repite, podemos agrupar los dígitos en grupos de 10 con igual suma, exceptuando al último. Para el último grupo, dependiendo en qué digito termine el número tendremos una suma residual distinta.
La cantidad de grupos con igual suma es $N / 10$ y los grupos suman $1+2+3+\dots+9=45$. Dependiendo del último dígito que es igual al residuo $r = N\mod10$, tendremos que el último grupo suma 
$1+2+\dots r = r(r+1)/2$. Así podemos obtener la suma inicial en tiempo constante. El resto de la solución continúa idéntica, calculando iterativamente la suma de dígitos empezando por la suma inicial. La razón por la que esta solución pasa la segunda subtarea es que la suma inicial $S = (45 (N/10)) + (r(r+1)) / 2 < 2^{64} - 1$ si $N \leq 2^{58}$, por lo que la suma inicial cabe en un entero unsigned long long. Esto no sucede cuando $N = 2^{64} - 1$.

Para la tercera subtarea necesitamos una idea distinta a guardar la suma inicial y luego a sumar sus dígitos repetidamente. La clave está en darnos cuenta que el proceso mantiene invariante el residuo en la división para 9. Esto ocurre como consecuencia del criterio de divisibilidad para 9, en el cual un número es congruente con la suma de sus dígitos módulo 9. Ya que el proceso ejecuta esto repetidamente, por transitividad ocurrirá que al quedarnos un dígito, este sea congruente con el valor inicial módulo 9. Si el número original es múltiplo de 9, entonces el dígito final será 9.
Con esto en mente, utilizamos el argumento de grupos de 10 dígitos de la solución anterior. Ya que los grupos de 10 dígitos suman 45 que es múltiplo de 9, la suma de todos estos grupos nos da como resultado 0 en módulo 9. Esto indica que el residuo módulo 9 depende únicamente del último grupo de dígitos. Dependiendo del último dígito, que se obtiene con $r = N\mod10$, la suma del último grupo será $(r(r+1)) / 2$. El residuo de esta expresión al dividir por 9 será la respuesta final, exceptuando si es 0. En ese caso, la respuesta será 9.
