Claramente podemos iterar sobre todas las ternas de puntos en $O(N^3)$ verificando si el triángulo en cuestión es isósceles y contándolo. Esto nos permite resolver la primera subtarea.

Para el caso general, podemos fijar un punto como ápice del triángulo. Luego podemos iterar sobre todos los demás puntos utilizando un mapa donde la clave es la distancia al cuadrado. Recorremos todos los otros puntos y calculamos su distancia cuadrada a $i$. Si para alguna distancia hay $p$ puntos que tienen esa distancia, entonces se pueden formar $\frac{p \times p-1}{2}$ triángulos isósceles con esa distancia. Sumamos todos estos valores para obtener el total de triángulos. Esto resuelve el problema en $O(N^2 \log N)$ o $O(N^2)$ dependiendo cómo esté implementado el mapa en cuestión.
